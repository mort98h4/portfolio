---
import { mainLang, supportedLangs } from '../../pages/[...path].astro';

interface Props {
    lang: string;
}

const { lang } = Astro.props

const navLinks = {
    da: {
        links: [
            {
                href: '#profile',
                title: 'Profil'
            },
            {
                href: '#experience',
                title: 'Erfaring'
            },
            {
                href: '#projects',
                title: 'Projekter'
            },
            {
                href: '#contact',
                title: 'Kontakt'
            }
        ]
    },
    en: {
        links: [
            {
                href: '#profile',
                title: 'Profile'
            },
            {
                href: '#experience',
                title: 'Experience'
            },
            {
                href: '#projects',
                title: 'Projects'
            },
            {
                href: '#contact',
                title: 'Contact'
            }
        ]
    }
}

---

<nav class="w-full py-2 px-4 fixed top-0 z-[9999] bg-[var(--color-5)}/30 backdrop-blur-md">
    <div class="mx-auto max-w-6xl flex flex-col md:flex-row justify-between md:items-center">
        <div class="title flex items-center justify-between md:w-auto">
            <a href="#hero" class="code text-lg">&lt;Morten Schou Gross /&gt;</a>
            
            
            <button 
                id="navigation-toggler"
                role="button"
                class="icon-btn md:hidden"
                data-target="#navigation-content"
                aria-controls="navigation-content"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <i class="fa-solid fa-bars text-[1.5rem] pointer-events-none absolute"></i>
                <i class="fa-solid fa-x text-[1.5rem] pointer-events-none absolute"></i>
            </button>
        </div>

        

        <div id="navigation-content" class="flex justify-end text-end">
            <ul class="navigation-list md:flex md:flex-row md:gap-4 pt-3 md:pt-0">

                <li class="w-full flex justify-end mb-2 md:mb-0 md:order-2">
                    <button id="language-toggler" title="Change language" role="button" class="icon-btn">
                        <i class="fa-solid fa-flag text-[1.5rem] absolute pointer-events-none"></i>
                    </button>
                    <ul class="dropdown-menu">
                        {supportedLangs.map((supLan) => (
                            <li class="dropdown-item">
                                <a 
                                    class={supLan === lang ? 'font-bold' : ''}
                                    href={supLan !== mainLang ? `/${supLan}` : '/'}
                                >
                                    {supLan.toUpperCase()}
                                </a>
                            </li>
                        ))}
                    </ul>
                </li>

                <li class="w-full flex justify-end mb-2 md:mb-0 md:order-2">
                    <button id="dark-mode-toggler" title="Toggle dark mode" role="button" data-color-mode="light" class="icon-btn">
                        <i class="fa-solid fa-moon text-[1.5rem] absolute pointer-events-none"></i>
                        <i class="fa-solid fa-sun text-[1.5rem] absolute pointer-events-none"></i>
                    </button>
                </li>
                {
                    navLinks[lang].links.map((link) => (
                        <li class="order-1">
                            <a class="nav-link mb-2 inline-block md:mb-0" href={link.href}>{link.title}</a>
                        </li>
                    ))
                }
            </ul>
        </div>
    </div>
</nav>

<style>
    nav {
        transform: translateY(-100%);
        transition: transform .15s ease-in-out;
    }

    nav.show {
        transform: translateY(0);
    }

    .text-lg.code {
        -webkit-text-stroke: .06em var(--color-1);
    }

    .icon-btn {
        position: relative;
        width: 1.5rem;
        height: 1.5rem;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: color .15s ease-in-out;
        color: var(--color-2);
        cursor: pointer;
    }

    .icon-btn:focus, .icon-btn:hover {
        color: var(--color-1);
    }

    #navigation-toggler > i,
    #dark-mode-toggler > i {
        opacity: 0;
        transition: opacity .15s ease-in-out, transform .15s ease-in-out;
        transform: rotate(0deg);
    }

    #navigation-toggler[aria-expanded="true"] > .fa-x,
    #navigation-toggler[aria-expanded="false"] > .fa-bars,
    html.dark #dark-mode-toggler > .fa-sun,
    html:not(.dark) #dark-mode-toggler > .fa-moon {
        opacity: 1;
    }

    #navigation-toggler[aria-expanded="false"] > .fa-bars,
    html.dark #dark-mode-toggler > .fa-sun {
        transform: rotate(-360deg);
    }

    #navigation-toggler[aria-expanded="true"] > .fa-x,
    html:not(.dark) #dark-mode-toggler > .fa-moon {
        transform: rotate(360deg);
    }

    #navigation-content {
        overflow: hidden;
        max-height: 0px;
        transition: max-height .15s ease-in-out;
    }

    #navigation-content.show {
        max-height: var(--navigation-list-height);
    }

    @media screen and (min-width: 768px) {
        #navigation-toggler {
            display: none;
        }

        #navigation-content {
            max-height: unset;
        }
    }
</style>
